# ZVPN 配置文件

# ==================== 服务器配置 ====================
server:
  host: "0.0.0.0"
  port: "18080"    # HTTP 管理 API 端口
  mode: "debug"   # debug 或 release

# ==================== 数据库配置 ====================
database:
  # 支持的数据库类型: mysql, postgres, sqlite
  # MySQL: type: "mysql", dsn: "user:pass@tcp(host:3306)/dbname?charset=utf8mb4&parseTime=True&loc=Local"
  # PostgreSQL: type: "postgres", dsn: "host=localhost user=zvpn password=zvpn dbname=zvpn port=5432 sslmode=disable"
  # SQLite: type: "sqlite", dsn: "data/zvpn.db" (文件路径，相对于应用目录)
  type: "mysql"
  dsn: "root:123456@tcp(mysql:3306)/zvpn?charset=utf8mb4&parseTime=True&loc=Local"
  # 连接池配置（可选，使用默认值即可）
  # 注意：SQLite 使用单连接，这些配置对 SQLite 无效
  maxopenconns: 25      # 最大打开连接数（默认：25，SQLite 使用 1）
  maxidleconns: 10      # 最大空闲连接数（默认：10，SQLite 使用 1）
  connmaxlifetime: 300  # 连接最大生存时间（秒，默认：300，即5分钟，SQLite 不使用）
  connmaxidletime: 60   # 连接最大空闲时间（秒，默认：60，即1分钟，SQLite 不使用）
  
# ==================== VPN 网络配置 ====================
vpn:
  # 网络配置
  interfacename: "zvpn0"
  network: "10.8.0.0/24"  # 使用与环境变量一致的网段
  mtu: 1420
  ebpfinterfacename: "eth0"  # 指定eBPF程序要挂载的物理网卡（如eth0, ens33, enp0s3等）
  
  certfile: "./certs/server.crt"
  keyfile: "./certs/server.key"
  
  # OpenConnect 协议配置（推荐）
  enableopenconnect: true        # 是否启用 OpenConnect
  openconnectport: "443"        # HTTPS 端口（VPN 客户端连接）
  enabledtls: true               # 启用 DTLS (UDP) 加速
  dtlsport: "443"               # DTLS UDP 端口（与 TCP 保持一致）
  
  # CSTP/DTLS 连接保活配置
  cstpdpd: 15                  
  cstpkeepalive: 10
  
  # 移动端客户端连接保活配置（移动端通常需要更短的 keepalive 间隔）
  mobiledpd: 60                # 移动端 DPD 间隔（秒，默认：60）
  mobilekeepalive: 4           # 移动端 Keepalive 间隔（秒，默认：4，与 anylink 一致）                    
  
# ==================== JWT 配置 ====================
jwt:
  secret: "de3b81da80999e0ab400286b838799eb0e56e9ea804783d873b0a3960c2cf7c7"  # 生产环境必须修改！
  expiration: 24  # Token 过期时间（小时）

